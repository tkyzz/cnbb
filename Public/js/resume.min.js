function caijian(a){var b=document.getElementById(a);new Cropper(b,{aspectRatio:1,resizable:!1,minContainerWidth:240,minContainerHeight:240,crop:function(a){$("#pic_x").val(Math.round(a.detail.x)),$("#pic_y").val(Math.round(a.detail.y)),$("#pic_w").val(Math.round(a.detail.width)),$("#pic_h").val(Math.round(a.detail.height))}})}function GetFileSize(a){var b=document.getElementById(a);return b.files[0].size}function testFileSize(){alert("文件大小="+GetFileSize("avatar_file"))}function tj_text_num(a,b,c){a.keyup(function(){var d=a.val().length;a.val(),d>=c&&(d=c),b.html("<span><span>"+d+"</span>/"+c+"</span>字")})}function compareDate(a,b){return a=new Date(a.replace(/-/g,"/")),b=new Date(b.replace(/-/g,"/")),Date.parse(a)-Date.parse(b)>0?!1:!0}function isCardNo(a){return pattern.test(a)}function get_edu_ajax(a){$.ajax({async:!1,type:"POST",url:"/get_resumeEdu",data:{id:$(".js_info_box").find('[name="resume_id"]').attr("data-id")},dataType:"json",success:function(b){1==b.status?($(".edu_profile_show").html(""),$(".edu_profile_show").append(b.edu_html),$(".edu_exchange_profile_show").html(""),$(".edu_exchange_profile_show").append(b.exchange_html),$(".edu_project_profile_show").html(""),$(".edu_project_profile_show").append(b.project_html),a.find(".save").val("保存").removeAttr("disabled"),a.find(".profile-edit").hide(),a.prev().show()):layer.msg(b.msg,{icon:5})}})}function get_xnjl_ajax(a){$.ajax({async:!1,type:"POST",url:"/get_resumeXnjl",data:{id:$(".js_info_box").find('[name="resume_id"]').attr("data-id")},dataType:"json",success:function(b){1==b.status?($(".rewards-profile-show").html(""),$(".rewards-profile-show").append(b.reward_html),$(".jobs-profile-show").html(""),$(".jobs-profile-show").append(b.jobs_html),$(".practice-profile-show").html(""),$(".practice-profile-show").append(b.practice_html),a.find(".save").val("保存").removeAttr("disabled"),a.find(".profile-edit").hide(),a.prev().show()):layer.msg(b.msg,{icon:5})}})}function getCertCourses(a){return""==a?!1:($.get("/ajax/getCertCourses",{cid:a},function(b){var c,d;1==b.status&&(c="",d="",10==a&&(c+='<div class="certificate-stage"><p class="stage-title"><span>F阶段</span></p>',d+='<div class="certificate-stage"><p class="stage-title"><span>P阶段</span></p>'),$(".js_cert_cousers").html(""),$.each(b.info,function(a,b){10==b.cid?"F"==b.group?c+='<div class="check-box"><input class="check certF" id="cer'+b.id+'"value="'+b.id+'" type="checkbox"><label for="cer'+b.id+'">'+b.name+"</label></div>":"P"==b.group&&(d+='<div class="check-box"><input class="check certP" id="cer'+b.id+'"value="'+b.id+'" type="checkbox"><label for="cer'+b.id+'">'+b.name+"</label></div>"):c+='<div class="check-box"><input class="check" id="cer'+b.id+'"value="'+b.id+'" type="checkbox"><label for="cer'+b.id+'">'+b.name+"</label></div>"}),10==a?(c+="</div>",d+="</div>",c+='<div class="last-level"><span>—</span><div class="check-box"><input class="check certF" id="last1" type="checkbox" value="all"><label for="last1">全部通过</label><em></em></div></div>',d+='<div class="last-level"><span>—</span><div class="check-box"><input class="check certP" id="last2" type="checkbox" value="all2"><label for="last2">全部通过</label><em></em></div></div>',c+=d):c+=5==a?'<div class="last-level"><span>—</span><div class="check-box"><input class="check" id="last" type="checkbox" value="all"><label for="last">持证人</label><em></em></div></div>':'<div class="last-level"><span>—</span><div class="check-box"><input class="check" id="last" type="checkbox" value="all"><label for="last">全部通过</label><em></em></div></div>',$(".js_cert_cousers").append(c))},"json"),void 0)}var startPicker,week_day,mytags,mytag_arr,systag_arr,time,check,i,navH;if($(function(){}),$("#avatar_file").change(function(){var b,c;new Image,b=$("#avatar_file").val(),c=GetFileSize("avatar_file"),b&&(/\.(jpg|jpeg|png)$/i.test(b)?c>5242880?($("#avatar_file").val(""),layer.msg("图片太大了,为"+parseInt(c/1024/1024)+"MB左右",{icon:2})):$("#avatarform").submit():($("#avatar_file").val(""),layer.msg("上传格式不正确",{icon:2})))}),$("#avatarform").validate({rules:{},messages:{},submitHandler:function(){$("#avatarform").ajaxSubmit({async:!1,dataType:"json",data:{name:"avatar_file",type:"noapi"},url:"/picUpload",beforeSubmit:function(){},success:function(a){1==a.status?($("#pic_name").val(a.path),layer.open({type:1,btn:["确定"],title:"裁剪头像",fix:!1,scrollbar:!1,shift:4,area:["600px","450px"],content:'<img id="image" src="'+a.path+'" height="800" width="600">',yes:function(a){var c,d,e,f,g;layer.close(a),c=$("#pic_name").val(),d=$("#pic_x").val(),e=$("#pic_y").val(),f=$("#pic_w").val(),g=$("#pic_h").val(),$.post("/ajax/upload",{filename:c,pic_x:d,pic_y:e,pic_w:f,pic_h:g},function(a){if(1==a.status){var b='<img src="'+a.path+'"/>';$(".js_avatar_show").html(""),$(".js_avatar_show").append(b),$("#avatar_id").val(a.file_id),layer.msg("上传成功",{icon:1})}else 0==a.status&&layer.msg(a.msg,{icon:5})},"json").error(function(){layer.msg("图片错误，无法裁剪",{icon:5})})},cancel:function(a){$("#avatar_file").val(""),layer.close(a)}}),caijian("image"),$("#avatar_file").val("")):($("#avatar_file").val(""),layer.msg(a.msg,{icon:2}))}})}}),$("#js_resume_name").blur(function(){var a=$("#js_resume_name").val(),b=$("#js_resume_name_bak").val(),c=$("#js_resume_name").attr("data-id"),d="";return a==b?!1:(d=0==a.length||0==c.length?"create":"update",$.post("/ajax/createUpdateResume",{name:a,id:c,type:d},function(b){1==b.status&&(layer.msg("简历名称修改成功！",{icon:6,time:1e3}),$("#js_resume_name_bak").val(a))},"json"),void 0)}),$(".js_re_open").click(function(){var a=$("#js_resume_name_bak").val(),b=$("#js_resume_name").attr("data-id"),c=$(this).val();return 0==a.length||0==b.length?!1:($.post("/ajax/createUpdateResume",{name:a,id:b,open_level:c,type:"update"},function(b){1==b.status&&$("#js_resume_name_bak").val(a)},"json"),void 0)}),$("#jzsx").click(function(){$("#workDays").show()}),$("#jqsx").click(function(){$("#workDays").hide()}),$("#post").click(function(){$("#postSelect").show()}),$("#postSelect").find(".js-post-choose").children("li").click(function(){var a=$(this).attr("data-id"),b=$("#industry").attr("data-id");return"undefined"==typeof b?(layer.msg("请先选择行业",{icon:5}),!1):($(this).addClass("active").siblings().removeClass("active"),$.get("/ajax/getwfs",{id:a},function(a){if(1==a.status){$("#postSelect").find(".post-choose").html("");var c="";$.each(a.info,function(a,d){b==d.trade_id&&(c+="<li data-id="+d.id+">"+d.name+"</li>")}),$("#postSelect").find(".post-choose").append(c)}},"json"),void 0)}),$("#postSelect").find(".post-choose").delegate("li","click",function(){var a=$(this).text(),b=$(this).attr("data-id");$(this).addClass("active").siblings().removeClass("active"),$("#post").val(a),$("#post").attr("data-id",b),$("#postSelect").hide(),$("#internshipForm").find('[name="function"]').val(b)}),$("#industry").click(function(){$("#industrySelect").show()}),$("#industrySelect").find(".post-choose").delegate("li","click",function(){var a=$(this).text(),b=$(this).attr("data-id");$(this).addClass("active").siblings().removeClass("active"),$("#industry").val(a),$("#industry").attr("data-id",b),$("#industrySelect").hide(),$("#internshipForm").find('[name="sub_trade"]').val(b)}),$("#industrySelect").find(".js-trade-choose").children("li").click(function(){var a=$(this).attr("data-id");$(this).addClass("active").siblings().removeClass("active"),$.get("/ajax/gettrade",{pid:a},function(b){if(1==b.status){$("#industrySelect").find(".post-choose").html("");var c="";$.each(b.info,function(a,b){c+="<li data-id="+b.id+">"+b.name+"</li>"}),$("#industrySelect").find(".post-choose").append(c),$("#internshipForm").find('[name="trade"]').val(a)}},"json")}),$("body").delegate(".js_get_school li","click",function(){var a=$(this).attr("value");$(this).addClass("active"),$.get("/ajax/ProvinceSchool",{code:a},function(a){if(1==a.status){$(".school").html("");var b="";$.each(a.info,function(a,c){c.name.length>14&&(c.name=c.name.substring(0,13)),b+="<li value="+c.id+">"+c.name+"</li>"}),$(".school").append(b)}},"json")}),$("body").delegate(".js_baseinfo_edit","click",function(){$(".js_info_show").hide(),$(".js_info_show").next().show()}),$("#js_edu_del").click(function(){var a=$(this).attr("data-id"),b=$(this).attr("data-name");layer.confirm("确定删除教育经历: "+b+"？",{btn:["删除","算了"]},function(){layer.close(b);var b=layer.load(1,{shade:[.1,"#fff"]});$.post("/ajax/updateResume",{edu_id:a,type:"edu_del"},function(a){1==a.status?(layer.msg("删除成功",{icon:1}),explorer()):layer.msg(a.msg,{icon:1})},"json")},function(){})}),$("body").delegate(".js_edu_edit","click",function(){var a=$(this).attr("data-id");$.get("/ajax/getEduDetail",{id:a},function(a){if(1==a.status){var c=a.info;$("#school_name").val(c.school_name).attr("data-id",c.school_id).attr("data-provid",c.province_code),$("#syear").find("option[value='"+c.syear+"']").prop("selected",!0),$("#smonth").find("option[value='"+c.smonth+"']").prop("selected",!0),$("#eyear").find("option[value='"+c.eyear+"']").prop("selected",!0),$("#emonth").find("option[value='"+c.emonth+"']").prop("selected",!0),$("#degree"+c.degree).prop("checked","checked"),$("#major_category_id").find("option[value='"+c.major_category_id+"']").prop("selected",!0),$("#major").val(c.major),$("#major").parent().next().html("<span><span>"+c.major.length+"</span>/10</span>字"),null!=c.second_major?($("a.second-specialty").hide(),$(".secmajor").show(),$("#second_major_category_id").find("option[value='"+c.second_major_category_id+"']").prop("selected",!0),$("#second_major").val(c.second_major)):($("a.second-specialty").show(),$(".secmajor").hide()),$("#faculty").val(c.faculty),$("#bp").val(c.bp),$("#rank").val(c.rank),$("#edu_id").val(c.id),$("#edu_type").val("edu_update"),$("#js_edu_del").attr("data-id",c.id).attr("data-name",c.school_name).show(),$(".js_edu_del").show(),$("#resume_edu").prev(".profile-show").hide(),$("#resume_edu").find(".profile-edit").show(),$("#resume_edu").find(".block-append").hide(),$("#resume_edu").find(".level-info").show()}},"json")}),$("body").delegate(".edu_save","click",function(){$("#resume_edu").valid()&&$("#resume_edu").submit()}),$.validator.addMethod("checkEduTime",function(){return"0"==$("#eyear").val()&&"0"==$("#emonth").val()?!0:compareDate($("#syear").val()+"-0"+$("#smonth").val()+"-01",$("#eyear").val()+"-0"+$("#emonth").val()+"-01")?!0:!1},"开始时间不能大于结束时间"),$.validator.addMethod("checkProjectTime",function(){return"0"==$("#project_eyear").val()&&"0"==$("#project_emonth").val()?!0:compareDate($("#project_syear").val()+"-0"+$("#project_smonth").val()+"-01",$("#project_eyear").val()+"-0"+$("#project_emonth").val()+"-01")?!0:!1},"开始时间不能大于结束时间"),$.validator.addMethod("checkJhTime",function(){return"0"==$("#jh_eyear").val()&&"0"==$("#jh_emonth").val()?!0:compareDate($("#jh_syear").val()+"-0"+$("#jh_smonth").val()+"-01",$("#jh_eyear").val()+"-0"+$("#jh_emonth").val()+"-01")?!0:!1},"开始时间不能大于结束时间"),$.validator.addMethod("checkScjobTime",function(){return"0"==$("#scjob_eyear").val()&&"0"==$("#scjob_emonth").val()?!0:compareDate($("#scjob_syear").val()+"-0"+$("#scjob_smonth").val()+"-01",$("#scjob_eyear").val()+"-0"+$("#scjob_emonth").val()+"-01")?!0:!1},"开始时间不能大于结束时间"),$.validator.addMethod("checkPracticeTime",function(){return"0"==$("#practice_eyear").val()&&"0"==$("#practice_emonth").val()?!0:compareDate($("#practice_syear").val()+"-0"+$("#practice_smonth").val()+"-01",$("#practice_eyear").val()+"-0"+$("#practice_emonth").val()+"-01")?!0:!1},"开始时间不能大于结束时间"),$.validator.addMethod("checkInternshipTime",function(){return"0"==$("#internship_eyear").val()&&"0"==$("#internship_emonth").val()?!0:compareDate($("#internship_syear").val()+"-0"+$("#internship_smonth").val()+"-01",$("#internship_eyear").val()+"-0"+$("#internship_emonth").val()+"-01")?!0:!1},"开始时间不能大于结束时间"),$("#resume_edu").validate({errorPlacement:function(a,b){a.appendTo(b.parent().next())},errorLabelContainer:"#edu_error",ignore:":hidden",onkeyup:!1,rules:{syear:{required:!0,checkNumiso:!0},smonth:{required:!0,checkNumiso:!0,checkEduTime:!0},school_name:{required:!0},degree:{required:!0},faculty:{numCheck:!0,userNamecheck:!0},major_category_id:{required:!0},major:{required:!0,numCheck:!0,userNamecheck:!0},bp:{range:[0,5]},rank:{digits:!0,range:[0,100]}},messages:{syear:{required:"入学时间为必填",checkNumiso:"入学年份为必选"},smonth:{required:"入学时间为必填",checkNumiso:"入学月份为必选",checkEduTime:"开始时间不能大于结束时间"},school_name:{required:"学校为必选"},degree:{required:"学历为必选"},faculty:{numCheck:"院系不能为纯数字",userNamecheck:"院系不能有非法字符"},major_category_id:{required:"专业为必选"},major:{required:"专业为必填",numCheck:"专业不能为纯数字",userNamecheck:"专业不能有非法字符"},bp:{range:"绩点在0-5之间"},rank:{digits:"排名必须是数字",range:"排名0-100之间"}},submitHandler:function(a){$("#resume_edu").ajaxSubmit({url:"/ajax/updateResume",type:"POST",data:{major_category_name:$("#major_category_id option:selected").text(),second_major_category_name:$("#second_major_category_id option:selected").text(),school_id:$('input[name="school_name"]').attr("data-id"),school_provid:$('input[name="school_name"]').attr("data-provid")},dataType:"json",beforeSubmit:function(){$(a).find(".save").val("提交中...").attr("disabled",!0)},success:function(b){var c,d,e,f,g,h,i,j;1==b.status?("edu_create"==$(a).find('[name="type"]').val()&&(c=$(a).find('[name="school_name"]').val(),d=$(a).find('[name="syear"]').val(),e=$(a).find('[name="smonth"]').val(),f=$(a).find('[name="eyear"]').val(),g=$(a).find('[name="emonth"]').val(),h="",h=0==f||0==g?"至今":f+g,i='<option value="'+b.res.result+'">'+c+" "+d+e+"—"+h+"</option>",$("#jh_edu_id").append(i),$("#project_edu_id").append(i),j=["上海财经大学","同济大学","上海交通大学","华东师范大学","复旦大学"],$.inArray(c,j)>-1?layer.alert("童鞋，你已触发了和<"+c+">实习总猎头组队升级的机会，还不速加微信抱大腿。<br>微信号：ruirui0320shenyang",{btn:["本宝宝知道了"],title:"来自菜鸟帮帮的隐藏任务"}):layer.alert("童鞋，你已触发了和<"+c+">实习总猎头组队升级的机会，还不速加微信抱大腿。<br>微信号：jin_san_pang",{btn:["本宝宝知道了"],title:"来自菜鸟帮帮的隐藏任务"})),get_edu_ajax($(a))):-1==b.status?(layer.msg(b.msg,{icon:5}),$(a).find(".save").val("提交").removeAttr("disabled")):(layer.msg(b.msg,{icon:5}),$(a).find(".save").val("提交").removeAttr("disabled"))}})}}),$("body").delegate(".check","click",function(){var e,a=$(".js_cert_type").selected().val(),b="",c=new Array,d=$(this);$('input[name="courses"]').val(""),5==a?"checked"==d.attr("checked")?d.removeAttr("checked"):(d.attr("checked",!0),e=d.val(),$(".js_cert_cousers").find('.check[value!="'+e+'"]').each(function(){$(this).removeAttr("checked")})):10==a?("all"==d.val()&&("checked"==d.attr("checked")?(d.removeAttr("checked"),d.hasClass("certF")?$(".js_cert_cousers").find('.certF[value!="all"]').each(function(){$(this).removeAttr("disabled")}):d.hasClass("certP")&&$(".js_cert_cousers").find('.certP[value!="all"]').each(function(){$(this).removeAttr("disabled")})):(d.attr("checked",!0),d.hasClass("certF")?$(".js_cert_cousers").find('.certF[value!="all"]').each(function(){$(this).attr("disabled",!0).removeAttr("checked")}):d.hasClass("certP")&&$(".js_cert_cousers").find('.certP[value!="all"]').each(function(){$(this).attr("disabled",!0).removeAttr("checked")}))),"all2"==d.val()&&("checked"==d.attr("checked")?(d.removeAttr("checked"),d.hasClass("certF")?$(".js_cert_cousers").find('.certF[value!="all2"]').each(function(){$(this).removeAttr("disabled")}):d.hasClass("certP")&&$(".js_cert_cousers").find('.certP[value!="all2"]').each(function(){$(this).removeAttr("disabled")})):(d.attr("checked",!0),d.hasClass("certF")?$(".js_cert_cousers").find('.certF[value!="all2"]').each(function(){$(this).attr("disabled",!0).removeAttr("checked")}):d.hasClass("certP")&&$(".js_cert_cousers").find('.certP[value!="all2"]').each(function(){$(this).attr("disabled",!0).removeAttr("checked")})))):"all"==d.val()&&("checked"==d.attr("checked")?(d.removeAttr("checked"),$(".js_cert_cousers").find('.check[value!="all"]').each(function(){$(this).removeAttr("disabled")})):(d.attr("checked",!0),$(".js_cert_cousers").find('.check[value!="all"]').each(function(){$(this).attr("disabled",!0).removeAttr("checked")}))),$(".js_cert_cousers").find(".check:checked").each(function(a){c[a]=$(this).val()}),b=c.join(","),$('input[name="courses"]').val(b)}),$("body").delegate(".js_cert_type","change",function(){var a=$(this).val();getCertCourses(a)}),$("body").delegate(".exchange_save","click",function(){$("#resume_edu_exchange").valid()&&$("#resume_edu_exchange").submit()}),$("#resume_edu_exchange").validate({errorLabelContainer:"#exchange_error",onkeyup:!1,rules:{edu_id:{required:!0},syear:{required:!0,checkNumiso:!0},smonth:{required:!0,checkNumiso:!0,checkJhTime:!0},country_code:{required:!0,checkNumiso:!0},major_cid:{checkNumiso:!0},school_name:{required:!0,numCheck:!0,userNamecheck:!0},degree:{required:!0},faculty:{required:!0,numCheck:!0,userNamecheck:!0},major_cid:{required:!0},major:{required:!0,numCheck:!0,userNamecheck:!0}},messages:{edu_id:{required:"请选择教育经历"},syear:{required:"入学时间为必填",checkNumiso:"入学年份必选"},smonth:{required:"入学时间为必填",checkNumiso:"入学月份必选",checkJhTime:"开始时间不能大于结束时间"},country_code:{required:"国家为必选",checkNumiso:"国家为必选"},major_cid:{checkNumiso:"专业为必选"},school_name:{required:"学校为必填",numCheck:"学校名称不能为纯数字",userNamecheck:"学校名称不能有非法字符"},degree:{required:"学历为必选"},faculty:{required:"院系为必填"},major_cid:{required:"专业为必选"},major:{required:"专业为必填",numCheck:"专业不能为纯数字",userNamecheck:"专业不能有非法字符"}},submitHandler:function(a){$("#resume_edu_exchange").ajaxSubmit({url:"/ajax/updateResume",type:"POST",dataType:"json",beforeSubmit:function(){$(a).find(".save").val("提交中...").attr("disabled",!0)},success:function(b){1==b.status?get_edu_ajax($(a)):(layer.msg(b.msg,{icon:2}),$(a).find(".save").val("保存").removeAttr("disabled",!1))}})}}),$("body").delegate(".js_edu_exchange_edit","click",function(){var a=$(this).attr("data-eduid"),b=$(this).attr("data-id");$.get("/ajax/getEduDetail",{id:a,exchange_id:b,type:"exchange"},function(a){if(1==a.status){var b=a.info;$("#jh_school_name").val(b.school_name),$("#jh_school_name").parent().next().html("<span><span>"+b.school_name.length+"</span>/18</span>字"),$("#jh_country_code").find("option[value='"+b.country_code+"']").prop("selected",!0),$("#jh_syear").find("option[value='"+b.syear+"']").prop("selected",!0),$("#jh_smonth").find("option[value='"+b.smonth+"']").prop("selected",!0),$("#jh_eyear").find("option[value='"+b.eyear+"']").prop("selected",!0),$("#jh_emonth").find("option[value='"+b.emonth+"']").prop("selected",!0),$("#jh_id").val(b.id),$("#jh_major_cid").find("option[value='"+b.major_category_id+"']").prop("selected",!0),$("#jh_major").val(b.major),$("#jh_major").parent().next().html("<span><span>"+b.major.length+"</span>/10</span>字"),$("#jh_edu_id").val(b.edu_id),$("#jh_remark").val(b.remark),$("#jh_edu_type").val("edu_exchange_update"),$("#jh_edu_id").attr("disabled",!0),$("#js_jh_edu__del").attr("data-id",b.id),$("#js_jh_edu__del").attr("data-name",b.school_name),$(".js_jh_edu__del").show(),$("#resume_edu_exchange").prev(".profile-show").hide(),$("#resume_edu_exchange").find(".profile-edit").show(),$("#resume_edu_exchange").find(".block-append").hide(),$("#resume_edu_exchange").find(".level-info").show()}},"json")}),$("body").delegate("#js_jh_edu__del","click",function(){var a=$(this).attr("data-id"),b=$(this).attr("data-name");layer.confirm("确定删除交换生经历: "+b+"？",{btn:["删除","算了"]},function(){layer.close(b);var b=layer.load(1,{shade:[.1,"#fff"]});$.post("/ajax/updateResume",{id:a,type:"edu_exchange_del"},function(a){1==a.status?(layer.msg("删除成功",{icon:1}),explorer()):layer.msg(a.msg,{icon:1})},"json")},function(){})}),$("body").delegate(".project_save","click",function(){$("#resume_edu_other").valid()&&$("#resume_edu_other").submit()}),$("#resume_edu_other").validate({errorPlacement:function(a,b){a.appendTo(b.parent().parent())},errorLabelContainer:"#project_error",onkeyup:!1,rules:{edu_id:{required:!0,checkNumiso:!0},name:{required:!0,numCheck:!0,userNamecheck:!0},syear:{required:!0,checkNumiso:!0},smonth:{required:!0,checkNumiso:!0,checkProjectTime:!0},role:{required:!0}},messages:{edu_id:{required:"请选择教育经历",checkNumiso:"教育经历必选"},name:{required:"请输入项目名称",numCheck:"名称不能为纯数字",userNamecheck:"名称不能有非法字符"},syear:{required:"入学时间为必选",checkNumiso:"入学年份必选"},smonth:{required:"入学时间为必选",checkNumiso:"入学月份必选",checkProjectTime:"开始时间不能大于结束时间"},role:{required:"请选择角色"}},submitHandler:function(a){$("#resume_edu_other").ajaxSubmit({url:"/ajax/updateResume",type:"POST",dataType:"json",beforeSubmit:function(){$(a).find(".save").val("提交中...").attr("disabled",!0)},success:function(b){1==b.status?get_edu_ajax($(a)):(layer.msg(b.msg,{icon:2}),$(a).find(".save").val("保存").removeAttr("disabled"))}})}}),$("body").delegate(".js_edu_project_edit","click",function(){var a=$(this).attr("data-eduid"),b=$(this).attr("data-id");$.get("/ajax/getEduDetail",{id:a,other_id:b,type:"other"},function(a){if(1==a.status){var b=a.info;$("#project_name").val(b.name),$("#project_name").parent().next().html("<span><span>"+b.name.length+"</span>/18</span>字"),$("#jh_country_code").find("option[value='"+b.country_code+"']").prop("selected",!0),$("#project_syear").find("option[value='"+b.syear+"']").prop("selected",!0),$("#project_smonth").find("option[value='"+b.smonth+"']").prop("selected",!0),$("#project_eyear").find("option[value='"+b.eyear+"']").prop("selected",!0),$("#project_emonth").find("option[value='"+b.emonth+"']").prop("selected",!0),$("#project_id").val(b.id),$("#role"+b.role).prop("checked",!0),$("#project_edu_id").val(b.edu_id),$("#project_remark").val(b.remark),$("#project_edu_id").attr("disabled",!0),$("#project_edu_type").val("edu_ex_update"),$(".js_project_edu__del").attr("data-id",b.id).attr("data-name",b.name),$(".js_project_edu__del").show(),$("#resume_edu_other").prev(".profile-show").hide(),$("#resume_edu_other").find(".profile-edit").show(),$("#resume_edu_other").find(".block-append").hide(),$("#resume_edu_other").find(".level-info").show()}},"json")}),$("body").delegate(".js_project_edu__del","click",function(){var a=$(this).attr("data-id"),b=$(this).attr("data-name");layer.confirm("确定删除项目经历: "+b+" 吗？",{btn:["删除","算了"]},function(){layer.close(b);var b=layer.load(1,{shade:[.1,"#fff"]});$.post("/ajax/updateResume",{id:a,type:"edu_ex_del"},function(a){1==a.status?(layer.msg("删除成功",{icon:1}),explorer()):layer.msg(a.msg,{icon:1})},"json")},function(){})}),$("body").delegate(".skill_save","click",function(){$("#resume_skill").valid()&&$("#resume_skill").submit()}),$("#resume_skill").validate({errorLabelContainer:"#skill_error",onkeyup:!1,rules:{englishscore:{digits:!0,min:1},ieltsscore:{range:[1,9]},toeflscore:{range:[1,120]}},messages:{englishscore:{digits:"必须为大于0的正整数",min:"必须为大于0的正整数"},ieltsscore:{range:"雅思分数为{0}-{1}分"},toeflscore:{range:"托福分数为{0}-{1}分"}},submitHandler:function(a){$("#resume_skill").ajaxSubmit({url:"/ajax/updateResume",type:"POST",dataType:"json",beforeSubmit:function(){$(a).find(".save").attr("disabled",!0)},success:function(b){1==b.status?$.ajax({async:!1,type:"POST",url:"/get_resumeSkill",data:{id:$(".js_info_box").find('[name="resume_id"]').attr("data-id")},dataType:"json",success:function(b){1==b.status?($(a).prev().html(""),$(a).prev().append(b.html),$(a).find(".save").val("保存").removeAttr("disabled"),$(a).find(".profile-edit").hide(),$(a).prev().show()):layer.msg(b.msg,{icon:5})}}):("json不正确"==b.msg?layer.msg("其他语言能力必须填完整",{icon:5}):layer.msg(b.msg,{icon:5}),$(a).find(".save").text("保存").removeAttr("disabled"))}})}}),$("body").delegate(".js_skill_edit","click",function(){var a=$(this).attr("data-id");$.get("/ajax/getSkill",{resume_id:a},function(a){var b,c,d,e,f,g,h,i,j;if(1==a.status){b=a.info,$("#skill_en option").each(function(){$(this).val()==b.en_level?"true"!=$(this).prop("selected")&&$(this).prop("selected",!0):$(this).prop("selected",!1)}),b.english_score>0&&b.en_level>=0?$('[name="englishscore"]').val(b.english_score):$('[name="englishscore"]').val(""),0!=b.ielts?($('[name="ielts"]').attr("checked",!0),-1!=b.ielts&&$('[name="ieltsscore"]').val(b.ielts)):($('[name="ielts"]').removeAttr("checked"),$('[name="ieltsscore"]').val("")),0!=b.toefl?($('[name="toefl"]').attr("checked",!0),-1!=b.toefl&&$('[name="toeflscore"]').val(b.toefl)):($('[name="toefl"]').removeAttr("checked"),$('[name="toeflscore"]').val("")),"undefined"!=typeof b.other_languages[0]&&""!=b.other_languages[0].name&&($("#skill_name").find("option[value='"+b.other_languages[0]["name"]+"']").attr("selected",!0),$("#proficiency").find("option[value='"+b.other_languages[0]["proficiency"]+"']").attr("selected",!0)),$("#skill_other_sel").html("");for(c in b.other_languages)if(0!=c){d="",e="",f=["德语","法语","俄语","韩语","日语","计算机"],g=["一般","良好","熟练","精通"];for(h in f)d+=b.other_languages[c]["name"]==f[h]?'<option value="'+f[h]+'" selected>'+f[h]+"</option>":'<option value="'+f[h]+'">'+f[h]+"</option>";for(i in g)e+=b.other_languages[c]["proficiency"]==i?'<option value="'+i+'" selected>'+g[i]+"</option>":'<option value="'+i+'">'+g[i]+"</option>";j='<div class="more-language"><div class="input-box"><select name="name[]" id="skill_name2"><option value="">选择语种</option>'+d+'</select></div><div class="input-box">'+'<select name="proficiency[]" id="proficiency2"><option value="">熟练程度</option>'+e+"</select></div></div>",$("#skill_other_sel").append(j)}$("#js_skill_type").val("skill_update"),$(".js_skill__del").show().attr("data-id",a.info.id),$('[name="skill_id"]').val(a.info.id),$("#resume_skill").prev(".profile-show").hide(),$("#resume_skill").find(".profile-edit").show(),$("#resume_skill").find(".block-append").hide(),$("#resume_skill").find(".level-info").show()}},"json")}),$("body").delegate(".js_skill__del","click",function(){var a=$(this).attr("data-id");return 0==a?!1:(layer.confirm("确定删除当前语言技能吗？",{btn:["删除","算了"]},function(){layer.close(b);var b=layer.load(1,{shade:[.1,"#fff"]});$.post("/ajax/updateResume",{id:a,type:"skill_del"},function(a){1==a.status?(layer.msg("删除成功",{icon:1}),explorer()):layer.msg(a.msg,{icon:1})},"json")},function(){}),void 0)}),$("body").delegate(".internship_save","click",function(){$("#internshipForm").valid()&&$("#internshipForm").submit()}),$("#internshipForm").validate({errorLabelContainer:"#internship_error",onkeyup:!1,rules:{company_name:{required:!0,numCheck:!0,userNamecheck:!0},syear:{required:!0,checkNumiso:!0},smonth:{required:!0,checkNumiso:!0,checkInternshipTime:!0},work_type:{required:!0},work_remark:{required:!0},department:{required:!0,numCheck:!0,userNamecheck:!0},sel_trade:{required:!0},nature:{required:!0},sel_function:{required:!0}},messages:{company_name:{required:"请输入公司名称",numCheck:"请输入正确的公司名称",userNamecheck:"公司名称不能包含非法字符"},syear:{required:"请选择开始时间",checkNumiso:"请选择开始年份"},smonth:{required:"请选择开始时间",checkNumiso:"请选择开始月份",checkInternshipTime:"开始时间不能大于结束时间"},work_type:{required:"请选择工作类型"},work_remark:{required:"请输入工作描述"},department:{required:"部门不能为空",numCheck:"部门不能为纯数字",userNamecheck:"部门不能有非法字符"},sel_trade:{required:"请选择行业"},nature:{required:"请选择公司性质"},sel_function:{required:"请选择职能"}},submitHandler:function(a){$("#internshipForm").ajaxSubmit({url:"/ajax/updateResume",type:"POST",dataType:"json",beforeSubmit:function(){$(a).find(".save").val("提交中...").attr("disabled",!0)},success:function(b){1==b.status?$.ajax({async:!1,type:"POST",url:"/get_resumeInternship",data:{id:$(".js_info_box").find('[name="resume_id"]').attr("data-id")},dataType:"json",success:function(b){1==b.status?($(a).prev().html(""),$(a).prev().append(b.html),$(a).find(".save").val("保存").removeAttr("disabled"),$(a).find(".profile-edit").hide(),$(a).prev().show()):($(a).find(".save").val("保存").removeAttr("disabled"),layer.msg(b.msg,{icon:5}))},error:function(){layer.msg("出现错误，请重试！",{icon:5})}}):(layer.msg(b.msg,{icon:5}),$(a).find(".save").val("保存").removeAttr("disabled"))}})}}),$("body").delegate(".js_internship_edit","click",function(){var a=$(this).attr("data-id");$.get("/ajax/getInternship",{id:a},function(a){if(1==a.status){var b=a.info;$("#internshipForm").find('[name="id"]').val(b.id),$(".js_intership_del").attr("data-id",b.id).attr("data-name",b.company_name),$("#internshipForm").find('[name="company_name"]').val(b.company_name),$("#internshipForm").find('[name="company_name"]').parent().next().html("<span><span>"+b.company_name.length+"</span>/24</span>字"),$("#internship_syear").find("option[value='"+b.syear+"']").prop("selected",!0),$("#internship_smonth").find("option[value='"+b.smonth+"']").prop("selected",!0),$("#internship_eyear").find("option[value='"+b.eyear+"']").prop("selected",!0),$("#internship_emonth").find("option[value='"+b.emonth+"']").prop("selected",!0),$("#internship_nature").find("option[value='"+b.nature+"']").prop("selected",!0),$("#internship_department").val(b.department),$("#industry").val(b.subtrade_name).attr("data-id",b.subtrade),$("#post").val(b.function_name),$("#workType"+b.work_type).prop("checked",!0),$("#work_remark").val(b.work_remark),$("#work_ex").val(b.work_ex),$("#internshipForm").find('[name="trade"]').val(b.trade),$("#internshipForm").find('[name="sub_trade"]').val(b.subtrade),$("#internshipForm").find('[name="function"]').val(b.func),$("#internshipForm").find('[name="type"]').val("internship_update"),$(".work_remark").html(""),$(".work_remarknum").html("<span>"+b.work_remark.length+"</span>/2000"),$(".work_ex").html(""),$(".work_exnum").html("<span>"+b.work_ex.length+"</span>/2000"),$("#internshipForm").prev(".profile-show").hide(),$("#internshipForm").find(".profile-edit").show(),$("#internshipForm").find(".block-append").hide(),$("#internshipForm").find(".level-info").show()}else layer.msg(a.msg,{icon:5})},"json")}),$("body").delegate(".js_intership_del","click",function(){var a=$(this).attr("data-id"),b=$(this).attr("data-name");layer.confirm("确定删除"+b+"的实习经验吗？",{btn:["删除","算了"]},function(){layer.close(b);var b=layer.load(1,{shade:[.1,"#fff"]});$.post("/ajax/updateResume",{id:a,type:"internship_del"},function(a){1==a.status?(layer.msg("删除成功",{icon:1}),explorer()):layer.msg(a.msg,{icon:5})},"json")},function(){})}),$("body").delegate(".reward_save","click",function(){$("#school_reward").valid()&&$("#school_reward").submit()}),$("#school_reward").validate({errorLabelContainer:"#reward_error",onkeyup:!1,rules:{syear:{required:!0,checkNumiso:!0},smonth:{required:!0,checkNumiso:!0},level:{required:!0},name:{required:!0,numCheck:!0,userNamecheck:!0}},messages:{syear:{required:"请选择获得时间",checkNumiso:"请选择获得年份"},smonth:{required:"请选择获得时间",checkNumiso:"请选择获得月份"},level:{required:"请选择等级"},name:{required:"请输入奖项名称",numCheck:"名称不能为纯数字",userNamecheck:"名称不能有非法字符"}},submitHandler:function(a){$("#school_reward").ajaxSubmit({url:"/ajax/updateResume",type:"POST",dataType:"json",beforeSubmit:function(){$(a).find(".save").val("提交中...").attr("disabled",!0)},success:function(b){1==b.status?get_xnjl_ajax($(a)):(layer.msg(b.msg,{icon:5}),$(a).find(".save").val("保存").removeAttr("disabled"))}})}}),$("body").delegate(".js_reward_edit","click",function(){var a=$(this).attr("data-resumeid"),b=$(this).attr("data-id");$.get("/ajax/getReward",{resume_id:a,id:b},function(a){if(1==a.status){var b=a.info;$("#reward_syear").find("option[value='"+b.syear+"']").prop("selected",!0),$("#reward_smonth").find("option[value='"+b.smonth+"']").prop("selected",!0),$("#level"+b.level).prop("checked",!0),$("#reward_name").val(b.name),$("#reward_name").parent().next().html("<span><span>"+b.name.length+"</span>/18</span>字"),$("#reward_id").val(b.id),$("#reward_type").val("school_reword_update"),$(".js_reward__del").attr("data-id",b.id).attr("data-name",b.name),$("#school_reward").prev(".profile-show").hide(),$("#school_reward").find(".profile-edit").show(),$("#school_reward").find(".block-append").hide(),$("#school_reward").find(".level-info").show()}},"json")}),$("body").delegate(".js_reward__del","click",function(){var a=$(this).attr("data-id"),b=$(this).attr("data-name");return 0==a?!1:(layer.confirm("确定删除校内荣誉: "+b+"吗？",{btn:["删除","算了"]},function(){layer.close(b);var b=layer.load(1,{shade:[.1,"#fff"]});$.post("/ajax/updateResume",{id:a,type:"school_reword_del"},function(a){1==a.status?(layer.msg("删除成功",{icon:1}),explorer()):layer.msg(a.msg,{icon:1})
},"json")},function(){}),void 0)}),$("body").delegate(".school_job_save","click",function(){$("#school_job").valid()&&$("#school_job").submit()}),$("#school_job").validate({errorPlacement:function(a,b){a.appendTo(b.parent().parent())},errorLabelContainer:"#school_job_error",onkeyup:!1,rules:{syear:{required:!0,checkNumiso:!0},smonth:{required:!0,checkNumiso:!0,checkScjobTime:!0},remark:{required:!0},role:{required:!0}},messages:{syear:{required:"请选择开始时间",checkNumiso:"请选择开始年份"},smonth:{required:"请选择开始时间",checkNumiso:"请选择开始月份",checkScjobTime:"开始时间不能大于结束时间"},remark:{required:"请输入职务描述"},role:{required:"请选择角色"}},submitHandler:function(a){$("#school_job").ajaxSubmit({url:"/ajax/updateResume",type:"POST",dataType:"json",beforeSubmit:function(){$(a).find(".save").val("提交中...").attr("disabled",!0)},success:function(b){1==b.status?get_xnjl_ajax($(a)):$(a).find(".save").val("保存").removeAttr("disabled")}})}}),$("body").delegate(".js_scjob_edit","click",function(){var a=$(this).attr("data-resumeid"),b=$(this).attr("data-id");$.get("/ajax/getSchoolJob",{resume_id:a,id:b},function(a){if(1==a.status){var b=a.info;$("#scjob_syear").find("option[value='"+b.syear+"']").prop("selected",!0),$("#scjob_smonth").find("option[value='"+b.smonth+"']").prop("selected",!0),$("#scjob_eyear").find("option[value='"+b.eyear+"']").prop("selected",!0),$("#scjob_emonth").find("option[value='"+b.emonth+"']").prop("selected",!0),$("#prole"+b.role).prop("checked",!0),$("#scjob_remark").val(b.remark),$("#scjob_id").val(b.id),$("#school_job").find("[name=type]").val("school_job_update"),$(".js_scjob__del").attr("data-id",b.id),$("#school_job").prev(".profile-show").hide(),$("#school_job").find(".profile-edit").show(),$("#school_job").find(".block-append").hide(),$("#school_job").find(".level-info").show()}},"json")}),$("body").delegate(".js_scjob_add","click",function(){$("#scjob_res").click(),$("#scjob_syear").val("0"),$("#scjob_smonth").val("0"),$("#scjob_eyear").val("0"),$("#scjob_emonth").val("0"),$('input[name="role"]').attr("checked",!1),$("#school_job").prev(".profile-show").hide(),$("#school_job").find(".profile-edit").show(),$("#school_job").find(".block-append").hide(),$("#school_job").find(".level-info").show()}),$(".js_scjob_cancel").click(function(){$(this).attr("data-id").length>0?($(".edu_project_profile_show").show(),$(".project_block").hide(),$(".edu_project_profile_edit").hide()):($(".edu_project_profile_show").hide(),$(".project_block").show(),$(".edu_project_profile_edit").show()),$(".project_sub").hide()}),$(".js_scjob__del").click(function(){var a=$(this).attr("data-id");return $(this).attr("data-name"),0==a?!1:(layer.confirm("确定删除校内职务吗？",{btn:["删除","算了"]},function(){layer.close(b);var b=layer.load(1,{shade:[.1,"#fff"]});$.post("/ajax/updateResume",{id:a,type:"school_job_del"},function(a){1==a.status?(layer.msg("删除成功",{icon:1}),explorer()):layer.msg(a.msg,{icon:1})},"json")},function(){}),void 0)}),$(".practice_save").click(function(){$("#school_practice").valid()&&$("#school_practice").submit()}),$("#school_practice").validate({errorLabelContainer:"#practice_error",onkeyup:!1,rules:{syear:{required:!0,checkNumiso:!0},smonth:{required:!0,checkNumiso:!0,checkPracticeTime:!0},remark:{required:!0},name:{required:!0,numCheck:!0,userNamecheck:!0}},messages:{syear:{required:"请选择开始时间",checkNumiso:"请选择开始年份"},smonth:{required:"请选择开始时间",checkNumiso:"请选择开始月份",checkPracticeTime:"开始时间不能大于结束时间"},remark:{required:"请输入实践描述"},name:{required:"请输入社会实践名称",numCheck:"名称不能为纯数字",userNamecheck:"名称不能有非法字符"}},submitHandler:function(a){$("#school_practice").ajaxSubmit({url:"/ajax/updateResume",type:"POST",dataType:"json",beforeSubmit:function(){$(a).find(".save").val("提交中...").attr("disabled",!0)},success:function(b){1==b.status?get_xnjl_ajax($(a)):$(a).find(".save").text("保存").removeAttr("disabled")}})}}),$("body").delegate(".js_practice_edit","click",function(){var a=$(this).attr("data-resumeid"),b=$(this).attr("data-id");$.get("/ajax/getPractice",{resume_id:a,id:b},function(a){if(1==a.status){var b=a.info;$("#practice_id").val(b.id),$("#practice_syear").find("option[value='"+b.syear+"']").prop("selected",!0),$("#practice_smonth").find("option[value='"+b.smonth+"']").prop("selected",!0),$("#practice_eyear").find("option[value='"+b.eyear+"']").prop("selected",!0),$("#practice_emonth").find("option[value='"+b.emonth+"']").prop("selected",!0),$("#practice_name").val(b.name),$("#practice_name").parent().next().html("<span><span>"+b.name.length+"</span>/18</span>字"),$("#practice_remark").val(b.remark),$("#school_practice").prev(".profile-show").hide(),$("#school_practice").find(".profile-edit").show(),$("#school_practice").find(".block-append").hide(),$("#school_practice").find(".level-info").show(),$("#practice_type").val("school_practice_update"),$(".js_practice__del").attr("data-id",b.id).attr("data-name",b.name),$("#practice_remarknum").html(""),$("#practice_remarknum").html("<span>"+b.remark.length+"</span>/2000")}else layer.msg(a.msg,{icon:5})},"json")}),$(".js_practice__del").click(function(){var a=$(this).attr("data-id"),b=$(this).attr("data-name");return 0==a?!1:(layer.confirm("确定删除社会实践 : "+b+"吗？",{btn:["删除","算了"]},function(){layer.close(b);var b=layer.load(1,{shade:[.1,"#fff"]});$.post("/ajax/updateResume",{id:a,type:"school_practice_del"},function(a){1==a.status?(layer.msg("删除成功",{icon:1}),explorer()):layer.msg(a.msg,{icon:1})},"json")},function(){}),void 0)}),$("body").delegate(".js_edu_add","click",function(){$(".school").html(""),$("#schoolSelect").hide(),$(".js_get_school li").removeClass("active"),$("#school_name").val(""),$("a.second-specialty").show(),$(".secmajor").hide(),$("#faculty").val(""),$("#syear").val("0"),$("#smonth").val("0"),$("#eyear").val("0"),$("#emonth").val("0"),$("#major_category_id").val("0"),$("#major").val(""),$("#major").parent().next().html("<span><span>0</span>/10</span>字"),$("#second_major_category_id").val("0"),$("#second_major").val(""),$('input[name="degree"]').attr("checked",!1),$("#bp").val(""),$("#rank").val(""),$("#edu_type").val("edu_create"),$("#js_edu_del").attr("data-id","").attr("data-name",""),$(".edu_profile_show").hide(),$(".edu_profile_edit").show(),$(".edu_sub").show(),$("#js_edu_del").hide()}),$("body").delegate(".js_edu_exchange_add","click",function(){$("#jh_edu_id").val("0"),$("#jh_country_code").val("0"),$("#jh_school_name").val(""),$("#jh_school_name").parent().next().html("<span><span>0</span>/18</span>字"),$("#jh_major_cid").val("0"),$("#jh_major").val(""),$("#jh_major").parent().next().html("<span><span>0</span>/10</span>字"),$("#jh_syear").val("0"),$("#jh_smonth").val("0"),$("#jh_eyear").val("0"),$("#jh_emonth").val("0"),$("#jh_remark").val(""),$("#js_jh_edu__del").attr("data-id","").attr("data-name",""),$("#jh_edu_type").val("edu_exchange_create"),$("#jh_edu_id").removeAttr("disabled"),$(".js_jh_edu__del").hide(),$("#resume_edu_exchange").prev(".profile-show").hide(),$("#resume_edu_exchange").find(".profile-edit").show(),$("#resume_edu_exchange").find(".block-append").hide(),$("#resume_edu_exchange").find(".level-info").show()}),$("body").delegate(".js_edu_project_add","click",function(){$("#project_edu_id").val("0"),$("#project_name").val(""),$("#project_name").parent().next().html("<span><span>0</span>/18</span>字"),$("#project_syear").val("0"),$("#project_smonth").val("0"),$("#project_eyear").val("0"),$("#project_emonth").val("0"),$('input[name="role"]').attr("checked",!1),$("#project_remark").val(""),$("#project_edu_id").removeAttr("disabled"),$("#project_edu_type").val("edu_ex_create"),$("#js_project_edu__del").attr("data-id","").attr("data-name",""),$(".js_project_edu__del").hide(),$("#resume_edu_other").prev(".profile-show").hide(),$("#resume_edu_other").find(".profile-edit").show(),$("#resume_edu_other").find(".block-append").hide(),$("#resume_edu_other").find(".level-info").show()}),$("body").delegate(".js_reward_add","click",function(){$("#reward_syear").val("0"),$("#reward_smonth").val("0"),$('input[name="level"]').attr("checked",!1),$("#reward_name").val(""),$("#reward_name").parent().next().html("<span><span>0</span>/18</span>字"),$("#js_reward_del").attr("data-id","").attr("data-name",""),$("#reward_type").val("school_reword_create"),$("#school_reward").prev(".profile-show").hide(),$("#school_reward").find(".profile-edit").show(),$("#school_reward").find(".block-append").hide(),$("#school_reward").find(".level-info").show()}),$("body").delegate(".js_practice_add","click",function(){$("#practice_syear").val("0"),$("#practice_smonth").val("0"),$("#practice_eyear").val("0"),$("#practice_emonth").val("0"),$("#practice_remark").val(""),$("#practice_name").val(""),$("#practice_name").parent().next().html("<span><span>0</span>/18</span>字"),$("#practice_type").val("school_practice_create"),$("#school_practice").prev(".profile-show").hide(),$("#school_practice").find(".profile-edit").show(),$("#school_practice").find(".block-append").hide(),$("#school_practice").find(".level-info").show()}),$(".cert_save").click(function(){$("#certForm").valid()&&$("#certForm").submit()}),$("#certForm").validate({ignore:":hidden",onkeyup:!1,rules:{},messages:{},submitHandler:function(a){$("#certForm").ajaxSubmit({url:"/ajax/updateResume",type:"POST",dataType:"json",beforeSubmit:function(){var b=new Array,c=$(a).find('[name="cid"]').val(),d=$(a).find('[name="cid"] option:selected').text();return $(".js_cert_edit").each(function(a){b[a]=$(this).attr("data-cid")}),$.inArray(c,b)>-1&&"cert_update"!=$("#certForm").find('[name="type"]').val()?(layer.msg("您已添加过"+d+"了！",{icon:5}),!1):0==$(a).find('[name="courses"]').val().length?(layer.msg("请选择证书科目",{icon:5}),!1):($(a).find(".save").val("提交中...").attr("disabled",!0),void 0)},success:function(b){1==b.status?$.ajax({async:!1,type:"POST",url:"/get_resumeCert",data:{id:$(".js_info_box").find('[name="resume_id"]').attr("data-id")},dataType:"json",success:function(b){1==b.status?($(a).prev().html(""),$(a).prev().append(b.html),$(a).find(".save").val("保存").removeAttr("disabled"),$(a).find(".profile-edit").hide(),$(a).prev().show()):layer.msg(b.msg,{icon:5})}}):$(a).find(".save").val("保存").removeAttr("disabled")}})}}),$("body").delegate(".js_cert_edit","click",function(){var a=$(this).attr("data-resumeid"),b=$(this).attr("data-id"),c=$(this).attr("data-cid");$(".js_cert_type").find("option[value='"+c+"']").attr("selected",!0),$(".js_cert_type").attr("disabled",!0),getCertCourses(c),$.get("/ajax/getCert",{resume_id:a,id:b},function(a){var b,c;if(1==a.status){b=a.info,$("#certForm").find('[name="id"]').val(b.id),$(".js_cert_del").attr("data-id",b.id).attr("data-name",b.cert_type_name),$("#certForm").find('[name="type"]').val("cert_update");for(c in b.pass_courses)$(".js_cert_cousers").find(".check[value="+b.pass_courses[c]+"]").attr("checked",!0);1==b.is_allpass||1==b.is_allpass2?(1==b.is_allpass&&($(".js_cert_cousers").find('.check[value="all"]').attr("checked",!0),$('input[name="courses"]').val("all")),1==b.is_allpass2&&($(".js_cert_cousers").find('.check[value="all2"]').attr("checked",!0),$('input[name="courses"]').val("all2"))):$('input[name="courses"]').val(b.pass_courses.join(",")),$(".js_cert_del").show(),$("#certForm").prev(".profile-show").hide(),$("#certForm").find(".profile-edit").show(),$("#certForm").find(".block-append").hide(),$("#certForm").find(".level-info").show()}else layer.msg(a.msg,{icon:5})},"json")}),$(".js_cert_del").click(function(){var a=$(this).attr("data-id"),b=$(this).attr("data-name");return 0==a?!1:(layer.confirm("确定删除证书： "+b+"吗",{btn:["删除","算了"]},function(){layer.close(b);var b=layer.load(1,{shade:[.1,"#fff"]});$.post("/ajax/updateResume",{id:a,type:"cert_del"},function(a){1==a.status?(layer.msg("删除成功",{icon:1}),explorer()):layer.msg(a.msg,{icon:1})},"json")},function(){}),void 0)}),$("body").delegate(".js_cert_add","click",function(){$(".js_cert_type").val("0"),$("#certForm").find('[name="courses"]').val(""),$("#certForm").find('[name="id"]').val(""),$("#certForm").find('[name="type"]').val("cert_create"),$(".js_cert_type").attr("disabled",!1),$(".js_cert_cousers").html(""),$(".js_cert_del").hide(),$("#certForm").prev(".profile-show").hide(),$("#certForm").find(".profile-edit").show(),$("#certForm").find(".block-append").hide(),$("#certForm").find(".level-info").show()}),$("body").delegate(".js_internship_add","click",function(){$("#internshipForm").find('[name="id"]').val(""),$("#internshipForm").find('[name="company_name"]').val(""),$("#internship_syear").val("0"),$("#internship_smonth").val("0"),$("#internship_eyear").val("0"),$("#internship_emonth").val("0"),$("#internship_nature").val("0"),$("#internship_department").val(""),$("#industry").val("点击选择公司所属行业"),$("#post").val("点击选择所在职位"),$("#internshipForm").find('input[name="work_type"]').attr("checked",!1),$("#work_remark").val(""),$("#work_ex").val(""),$("#internshipForm").find('[name="company_name"]').parent().next().html("<span><span>0</span>/24</span>字"),$("#internshipForm").find('[name="trade"]').val(""),$("#internshipForm").find('[name="sub_trade"]').val(""),$("#internshipForm").find('[name="function"]').val(""),$("#internshipForm").find('[name="type"]').val("internship_create"),$("#internshipForm").prev(".profile-show").hide(),$("#internshipForm").find(".profile-edit").show(),$("#internshipForm").find(".block-append").hide(),$("#internshipForm").find(".level-info").show()}),$(".js_internship_cancel").click(function(){$(this).attr("data-id").length>0?$(".internship_block").hide():$(".internship_block").show(),$(".internship_profile_show").show(),$(".internship_profile_edit").hide(),$(".internship_sub").show()}),$(".avatar-example").find(".example-title").hover(function(){$(this).next(".our-avatar").toggle("normal")}),startPicker=new Pikaday({field:document.getElementById("birth"),firstDay:1,minDate:new Date("1980-01-01"),maxDate:new Date("2000-12-31"),yearRange:[1980,2e3]}),$(".profile-show").each(function(a){0==$(this).attr("data-id")&&($(".profile-show").eq(a).hide(),$(".profile-edit").eq(a).show())}),$(".profile-edit").each(function(a){var b=$(this).attr("data-id");$(this).find(".cancel").click(function(){""==b?($(".profile-show").eq(a).hide(),$(".profile-edit").eq(a).show(),$(".profile-edit").eq(a).find(".block-append").show(),$(".profile-edit").eq(a).find(".level-info").hide()):($(".profile-show").eq(a).show(),$(".profile-edit").eq(a).hide())})}),week_day=$('input[name="week_day"]').val(),$("#work"+week_day).attr("checked","checked"),$(".second-specialty").click(function(){$(this).hide(),$(".secmajor").show()}),$("body").delegate(".js_get_school li","click",function(){$(this).addClass("active").siblings().removeClass("active")}),$("body").delegate("#school","click",function(){$("#schoolSelect").show()}),$("body").delegate(".school li","click",function(){var a,b,c;$(this).addClass("active").siblings().removeClass("active"),a=$(this).text(),b=$(this).val(),c=$(".js_get_school").children(".active").attr("value"),$("#school input").val(a).attr("data-id",b).attr("data-provid",c),$("#schoolSelect").hide()}),$("body").delegate("#selfAdd","click",function(){var d,f,a=$(this).prev().val(),b=new Array,c=/^([\u4e00-\u9fa5]|[a-zA-Z0-9_\(\)（）])*$/;return c.test(a)?""!=a&&a.length<=8?(d=(new Date).getTime(),f='<div class="check-box"><input class="check stag" name="stags" id="'+d+'" value="'+a+'" type="checkbox" checked><label for="'+d+'">'+a+"</label></div>",$(".self-depict").val(""),$(this).parent().parent().find(".self-box").append(f),$(".stag:checked").each(function(a){b[a]=$(this).val()}),str=b.join("|"),$('input[name="tags"]').val(str),void 0):(a.length>8&&layer.msg("自我描述最多八个字",{icon:5}),void 0):(layer.msg("自我描述只能是中文,英文,数字",{icon:5}),void 0)}),mytags=$("#resumebaseForm").find('[name="tags"]').val(),mytag_arr=new Array,systag_arr=new Array("社交达人","学习能力强","自信","宅"),time="",check="",mytag_arr=mytags.split("|"),mytags.length>0)for(i in mytag_arr)time=(new Date).getTime()+1,-1==$.inArray(mytag_arr[i],systag_arr)?(check='<div class="check-box"><input class="check stag" name="stags" id="'+i+'" value="'+mytag_arr[i]+'" type="checkbox" checked><label for="'+i+'">'+mytag_arr[i]+"</label></div>",$("#resumebaseForm").find(".self-box").append(check)):$(".self-box").find('input[value="'+mytag_arr[i]+'"]').attr("checked",!0);$("#avatar").hover(function(){$(this).find(".mask").toggle()}),$("#resume_edu").find('[name="syear"]').change(function(){$("#resume_edu").find('[name="smonth"]').val()>0||$("#resume_edu").find('[name="smonth"]').val("9")}),$("#practice_remarknum").html("<span>"+$("#practice_remark").val().length+"</span>/2000"),count_text_num("#practice_remark","#practice_remarknum"),count_text_num("#work_remark",".work_remarknum"),count_text_num("#work_ex",".work_exnum"),count_text_num("#scjob_remark",".scjob_exnum"),navH=$("#slideNav").offset().top,$(window).scroll(function(){var a=$(this).scrollTop();a>=navH?$("#slideNav").addClass("nav-scroll"):$("#slideNav").removeClass("nav-scroll")}),$("#resume_edu").find('[name="eyear"]').change(function(){$("#resume_edu").find('[name="emonth"]').val()>0||$("#resume_edu").find('[name="emonth"]').val("6")}),$('[name="gender"]').click(function(){var a=$("#avatar_id").val();0==a&&($(".js_avatar_show").html(""),"2"==$(this).val()?$(".js_avatar_show").append('<img src="__PUBLIC__/img/female.jpg">'):$(".js_avatar_show").append('<img src="__PUBLIC__/img/man.jpg">'))}),$("body").keyup(function(){var a=$('[name="ieltsscore"]').val(),b=$('[name="toeflscore"]').val();a.length>0&&$('[name="ielts"]').prop("checked",!0),b.length>0&&$('[name="toefl"]').prop("checked",!0)});