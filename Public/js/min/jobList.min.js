function getJobUrl(){var a="/get_postList",b=new Array;return $("#area").val()&&b.push("area="+$("#area").val()),$("#trade").val()&&b.push("trade="+$("#trade").val()),$("#work_type").val()&&b.push("work_type="+$("#work_type").val()),$("#week_day").val()&&b.push("week_day="+$("#week_day").val()),$("#natures").val()&&b.push("natures="+$("#natures").val()),$("#degrees").val()&&b.push("degrees="+$("#degrees").val()),$("#sort").val()&&b.push("sort="+$("#sort").val()),$("#keyword_by").val()&&b.push("keyword_by="+$("#keyword_by").val()),$("#keyword").val()&&b.push("keyword="+encodeURIComponent($("#keyword").val())),$("#work_day").val()&&b.push("work_day="+$("#work_day").val()),$("#page").val()&&b.push("page="+$("#page").val()),b.length>0&&(a="?"+b.join("&")),a}function spkey(a){var c,d,b=$("#"+a).val();if(0==b.length)return!1;c=b.split(","),$("."+a).eq(0).removeClass("active");for(d in c)$("."+a+"[data-id="+c[d]+"]").addClass("active").attr("data-type","cancel")}function spsingekey(a){var b=$("#"+a).val();return 0==$("#"+a).val().length?!1:("work_day"==a?$('[data-op="work_day"]').eq(0).removeClass("active"):($("."+a).eq(0).removeClass("active"),$("."+a+"[data-id="+b+"]").addClass("active").attr("data-type","cancel")),void 0)}function ajax_jobs(){var a="/get_postList"+getJobUrl();$.ajax({async:!1,type:"get",url:a,dataType:"json",contentType:"application/x-www-form-urlencoded; charset=utf-8",success:function(a){1==a.status&&($(".post-list-box").html(""),$(".post-list-box").append(a.html),a.is_val?$(".search-count").show().html("共找到<span>"+a.count+"</span>个岗位"):$(".search-count").hide(),a.page>1?($(".tcdPageCode").remove(""),$(".post-related").append('<div class="tcdPageCode"></div>'),$(".tcdPageCode").createPage({pageCount:a.page,current:1,backFn:function(a){$("#page").val(a);var b="/get_postList"+getJobUrl()+"&ispage=1";$.get(b,function(a){1==a.status&&a.html.length>10?($(".post-list-box").html(""),$(".post-list-box").append(a.html),$("body,html").animate({scrollTop:430},600)):alert("失败了")},"json")}}),$(".tcdPageCode").show()):$(".tcdPageCode").hide())}})}function ajax_searchhint(){var a=$("#search").val();return $("#search").attr("data"),a?($.get("/ajax/post/searchhint",{keyword:a},function(b){1==b.status&&($("#search").attr("data",a),$(".js_searchhint_res").html(b.info),$(".js_searchhint_res").attr("data-count",b.count).attr("data-now",-1),$(".js_searchhint_res").attr("data-show",1),$(".js_searchhint_res").show())},"json"),void 0):($(".js_searchhint_res").hide(),void 0)}$(".jzsx").hasClass("active")&&$("#partTimeSelection").show(),$(".jobsea").click(function(){var d,e,a=$(this).attr("data-id"),b=$(this).attr("data-op"),c=$("#"+b).val();return d=0!=c.length?c.split(","):"","0"==a?($(this).addClass("active").siblings().removeClass("active"),"work_day"==b?($(".duration_show").text("0个月"),$("#"+b).val("0")):$("#"+b).val(""),ajax_jobs(),!1):$(this).hasClass("active")?($(this).removeClass("active"),d.splice($.inArray(a,d),1),$("#"+b).val(d.join(",")),ajax_jobs(),""==$("#"+b).val()&&$("."+b).eq(0).addClass("active"),!1):d.length>2?!1:(0==c.length?$("#"+b).val(a):$("#"+b).val(c+","+a),("week_day"==b||"degrees"==b||"sort"==b)&&($(this).addClass("active").siblings().removeClass("active"),$("#"+b).val(a)),"work_type"==b&&(1==a?($("#work_day").val(""),$("#partTimeSelection").hide()):$("#partTimeSelection").show(),$(this).addClass("active").siblings().removeClass("active"),$("#"+b).val(a)),$("."+b+"[data-id="+a+"]").addClass("active"),$("."+b).eq(0).removeClass("active"),$("#page").val(""),e=layer.load(0,{shade:!1}),ajax_jobs(),layer.close(e),!1)}),$("body").delegate(".relation-item","click",function(){var c,a=$(this).attr("data-kw"),b=$(this).attr("data-type");return $("#keyword_by").val(b),$("#keyword").val(a),$("#page").val("1"),c=layer.load(0,{shade:!1}),ajax_jobs(),layer.close(c),$("#search").attr("data","").val(a),$(".js_searchhint_res").hide(),!1}),$(".keyword").click(function(){var a=$("#search").val(),b=$("#searchClass").find(".checked").attr("data");return $("#keyword_by").val(b),$("#keyword").val(a),$("#page").val("1"),ajax_jobs(),!1}),$(".raise").click(function(){$(".duration_show").html("");var a=$("#work_day").val();a++,$(this).attr("data-id",a),$("#work_day").val(a),$("#work_type").val(2),$(".duration_show").html(a+"个月"),ajax_jobs()}),$(".reduce").click(function(){var a=$("#work_day").val();return a--,0>=a?!1:($("#work_day").val(a),$("#work_type").val(2),$(".duration_show").html(""),$(".duration_show").html(a+"个月"),ajax_jobs(),void 0)}),$("#moreAddr").click(function(){var a=$(this).parent().find(".selection-box").height();a>"30"?($(this).parent().find(".selection-box").height("30px"),$(this).removeClass("active")):($(this).parent().find(".selection-box").height("auto"),$(this).addClass("active"))}),$(document).ready(function(){$("#searchClass").mouseleave(function(){$(".class-info").height("50")}),$("#searchClass").click(function(){var a=$(".class-info").height();50==a?(a=$(".class-info").height("auto"),$(this).find(".class-item").click(function(){$("#search").attr("placeholder","搜索"+$(this).text()),$(this).parent().prepend($(this)),$(this).addClass("checked").siblings().removeClass("checked")})):a=$(".class-info").height("50")}),$(function(){spkey("trade"),spkey("area"),spsingekey("work_type"),spkey("natures"),spsingekey("degrees"),spsingekey("sort"),spsingekey("week_day"),spsingekey("work_day")}),$(".post-search").mouseleave(function(){$(".js_searchhint_res").hide(),$(".js_searchhint_res").attr("data-show",-1)}),$("body").delegate(".relation-item","mouseover",function(){$(this).addClass("active"),$(this).hasClass("active")}),$("body").delegate(".relation-item","mouseleave",function(){$(this).hasClass("active")&&$(this).removeClass("active")}),$("#search").focus(function(){$("#search").unbind("keyup"),$("#search").keyup(function(a){var b,c,d,e,f;return lastTime=a.timeStamp,b=a.which,c=$(".js_searchhint_res").attr("data-show"),13==b&&$("#search").val()?($(".keyword").click(),$(".js_searchhint_res").hide(),!1):b>=37&&40>=b?(d=$(".js_searchhint_res").attr("data-count")-1,e=$(".js_searchhint_res").attr("data-now"),38==a.keyCode?(e--,0>e&&(e=d),$(".js_searchhint_res").attr("data-now",e),$(".relation-item").each(function(a){$(this).hasClass("active")&&$(".relation-item").eq(a).removeClass("active")}),$(".relation-item").eq(e).addClass("active")):40==a.keyCode&&(e++,e>d&&(e=0),$(".js_searchhint_res").attr("data-now",e),$(".relation-item").each(function(a){$(this).hasClass("active")&&$(".relation-item").eq(a).removeClass("active")}),$(".relation-item").eq(e).addClass("active")),$(".relation-item").eq(e).attr("data-kw")&&-1!=c&&$("#search").attr("data","").val($(".relation-item").eq(e).attr("data-kw")),void 0):(f=navigator.userAgent,f.indexOf("MSIE")>=0?(ajax_searchhint(),void 0):(setTimeout(function(){0==lastTime-a.timeStamp&&(ajax_searchhint(),lastTime=0)},1e3),void 0))})})});